Model "bmpdot:KRIPKE=model/edinburgh.dot,SPACE=model/edinburgh";

Let close(x) = N x;
Let reach(x,y) = !((!y) S (!x));
Let touch(x,y) = x & reach(x|y,y);
Let exists(x) = touch(TT,x);
Let forall(x) = !touch(TT,!x);

Let bus = [blue == 10];
Let bus1 = bus & [red == 0];
Let bus2 = bus & [red == 15];
Let bus3 = bus & [red == 30];
Let bus4 = bus & [red == 45];
Let bus5 = bus & [red == 60];
Let bus6 = bus & [red == 75];
Let bus7 = bus & [red == 90];
Let bus8 = bus & [red == 105];
Let bus9 = bus & [red == 120];
Let bus10 = bus & [red == 135];
Let bus11 = bus & [red == 150];
Let bus12 = bus & [red == 165];

Let delayed = [green > 0];
Let delayed1min = [green == 5];
Let delayed2mins = [green == 10];
Let delayed3mins = [green == 15];
Let delayed4mins = [green == 20];
Let delayed5mins = [green == 25];
Let delayed6mins = [green == 30];

Let busStop = [red == 0] & [green == 255] & [blue == 0];

Let busAtStop(x) = touch(busStop,x);
Let emptyStop = busStop & (!busAtStop(bus));

Let busAfterBus(x) = busAtStop(x) & E X busAtStop(bus & (!x));

Let timeConglomerate = busAfterBus(bus1);

Let int = busAtStop(bus1) & E X busAtStop(bus & (!bus1));

Let int2 = touch(bus1,(E X (N^5 (bus & (!bus1)))));
//Let int2 = threeSteps(bus1 & (N^3 (bus & (!bus1))));

// In the paper:
Let noDelay = forall(!(bus & delayed));

// In the paper:
Let noBusesStep(d,cont) =
    emptyStop & d & (E X cont);

// In the paper:
Let noBusesTenSteps(d) =
    noBusesStep(d,noBusesStep(d,noBusesStep(d,noBusesStep(d,noBusesStep(d,noBusesStep(d,noBusesStep(d,noBusesStep(d,noBusesStep(d,noBusesStep(d,emptyStop & d & (![deadlock])))))))))));

Output "mc_output/state";


//Check "yellow" N (busAfterBus(bus1 & (! delayed)));
//Check "magenta" (busAfterBus(bus1 & delayed));

//Check "magenta" E F noBuses;
//Check "orange" noBuses;

//Check "orange" E F noBusesND;
//Check "red" noBusesND;

//Check "magenta" N(bus & (!delayed));
//Check "red" N (bus & delayed);
//Check "yellow" E F int;
//Check "orange" int2;
//Check "red" I(E F int2);
//Check "red" exists(E F (bus & [green > 20]));


// In the paper:
//Check "red" exists(E F (bus & delayed6mins));

// In the paper:
//Check "orange" E F noBusesTenSteps(TT);
//Check "red" noBusesTenSteps(TT);

// In the paper:
//Check "orange" E F noBusesTenSteps(noDelay);
//Check "red" noBusesTenSteps(noDelay);



Check "red" emptyStop;
