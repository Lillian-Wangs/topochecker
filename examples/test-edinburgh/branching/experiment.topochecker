Model "bmpdot:KRIPKE=model/edinburgh.dot,SPACE=model/edinburgh";

Let close(x) = N x;
Let reach(x,y) = !((!y) S (!x));
Let touch(x,y) = x & reach(x|y,y);

Let bus = [blue == 177] & [green < 100];
Let delayed = [green > 0];

Let bus1 = bus & [red == 0];
Let bus2 = bus & [red == 15];
Let bus3 = bus & [red == 30];
Let bus4 = bus & [red == 45];
Let bus5 = bus & [red == 60];
Let bus6 = bus & [red == 75];
Let bus7 = bus & [red == 90];
Let bus8 = bus & [red == 105];
Let bus9 = bus & [red == 120];
Let bus10 = bus & [red == 135];
Let bus11 = bus & [red == 150];
Let bus12 = bus & [red == 165];

Let busStop = [red == 0] & [green == 255] & [blue == 0];

Let busAtStop(x) = touch(busStop,close(x));

Let busAfterBus(x) = busAtStop(x) & E X busAtStop(bus & (!x));

Let timeConglomerate = busAfterBus(bus1);

Let doubleConglomerate = busAtStop(bus) & E X (!(busAtStop(bus))) & (E X (E X (busAtStop(bus))));

Output "mc_output/state";

//Check "yellow" N (busAfterBus(bus1 & (! delayed)));
//Check "magenta" (busAfterBus(bus1 & delayed));

//Check "red" (E F doubleConglomerate);


//Check "red" bus;
//Check "orange" touch(busStop & (E X (!touch(busStop,bus))));
Check "magenta" busStop & touch(busStop,bus) & (!touch(busStop,E X bus));
Check "orange"
//busStop & touch(busStop,bus) & (touch(busStop,E X bus)) &
(touch(busStop,E X (E X bus)));